<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title></title><meta name="description" content="啥也没得说">
    <link rel="preload" href="/richard_blog/assets/style-Ck8rbdsF.css" as="style"><link rel="stylesheet" href="/richard_blog/assets/style-Ck8rbdsF.css">
    <link rel="modulepreload" href="/richard_blog/assets/app-e94K_zRz.js"><link rel="modulepreload" href="/richard_blog/assets/webpack.html-DJFVDM-s.js">
    <link rel="prefetch" href="/richard_blog/assets/index.html-ms3Ca4Vt.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-Cp6zfUmU.js" as="script"><link rel="prefetch" href="/richard_blog/assets/浏览器兼容性.html-BrxvSbAD.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-CTVDWfgZ.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-DcPk2_kq.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-Bi_pI5YP.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-BFTFZOqX.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index副本.html-BDLZ64Wd.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-B85mxSEH.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-BZcidVMH.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-BDPQHBTw.js" as="script"><link rel="prefetch" href="/richard_blog/assets/数据结构和算法.html-8RPj1v87.js" as="script"><link rel="prefetch" href="/richard_blog/assets/设计模式.html-CoBfURdf.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-DEPcZN0y.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-VgN-1AzX.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-DTcPLhso.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-BRtiylmY.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-DQx3mQaf.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-BgXnw5uj.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-6pJOZSrc.js" as="script"><link rel="prefetch" href="/richard_blog/assets/原理.html-DjSTyV85.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-LU4QDpV_.js" as="script"><link rel="prefetch" href="/richard_blog/assets/index.html-_AaV0qNF.js" as="script"><link rel="prefetch" href="/richard_blog/assets/eslint.html-BhEONVtF.js" as="script"><link rel="prefetch" href="/richard_blog/assets/prettier.html-C7KcAimk.js" as="script"><link rel="prefetch" href="/richard_blog/assets/规范搭建.html-BO6FVUnu.js" as="script"><link rel="prefetch" href="/richard_blog/assets/语法规范.html-D34TGmMl.js" as="script"><link rel="prefetch" href="/richard_blog/assets/404.html-CcK79zZq.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/richard_blog/"><!----><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/richard_blog/html/" aria-label="HTML"><!--[--><!--[--><!--]--> HTML <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/css/" aria-label="CSS"><!--[--><!--[--><!--]--> CSS <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JS"><span class="title">JS</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JS"><span class="title">JS</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/js/" aria-label="JS基础"><!--[--><!--[--><!--]--> JS基础 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/js/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" aria-label="设计模式"><!--[--><!--[--><!--]--> 设计模式 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/js/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95.html" aria-label="数据结构和算法"><!--[--><!--[--><!--]--> 数据结构和算法 <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/richard_blog/es6/" aria-label="ES6"><!--[--><!--[--><!--]--> ES6 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/vue2/" aria-label="VUE2"><!--[--><!--[--><!--]--> VUE2 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/vue3/" aria-label="VUE3"><!--[--><!--[--><!--]--> VUE3 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/react/" aria-label="react"><!--[--><!--[--><!--]--> react <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="浏览器"><span class="title">浏览器</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="浏览器"><span class="title">浏览器</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/browser/" aria-label="浏览器基础"><!--[--><!--[--><!--]--> 浏览器基础 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/browser/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%80%A7.html" aria-label="浏览器兼容"><!--[--><!--[--><!--]--> 浏览器兼容 <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/richard_blog/computerNetwork/" aria-label="计算机网络"><!--[--><!--[--><!--]--> 计算机网络 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/performance/" aria-label="性能优化"><!--[--><!--[--><!--]--> 性能优化 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/writeCode/" aria-label="手写代码"><!--[--><!--[--><!--]--> 手写代码 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/wxsp/" aria-label="小程序"><!--[--><!--[--><!--]--> 小程序 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/engineering/" aria-label="是什么"><!--[--><!--[--><!--]--> 是什么 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>代码规范</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/standard/eslint.html" aria-label="eslint"><!--[--><!--[--><!--]--> eslint <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/standard/prettier.html" aria-label="prettier"><!--[--><!--[--><!--]--> prettier <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/standard/%E8%A7%84%E8%8C%83%E6%90%AD%E5%BB%BA.html" aria-label="规范搭建"><!--[--><!--[--><!--]--> 规范搭建 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/standard/%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83.html" aria-label="语法规范"><!--[--><!--[--><!--]--> 语法规范 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>项目构建</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/webpack.html" aria-label="webpack"><!--[--><!--[--><!--]--> webpack <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/richard_blog/studyRoute/" aria-label="学习路线"><!--[--><!--[--><!--]--> 学习路线 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/projectSolution/" aria-label="项目"><!--[--><!--[--><!--]--> 项目 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/noWrite/" aria-label="待写"><!--[--><!--[--><!--]--> 待写 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/jiankong/" aria-label="前端监控"><!--[--><!--[--><!--]--> 前端监控 <!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/richard_blog/html/" aria-label="HTML"><!--[--><!--[--><!--]--> HTML <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/css/" aria-label="CSS"><!--[--><!--[--><!--]--> CSS <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JS"><span class="title">JS</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JS"><span class="title">JS</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/js/" aria-label="JS基础"><!--[--><!--[--><!--]--> JS基础 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/js/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" aria-label="设计模式"><!--[--><!--[--><!--]--> 设计模式 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/js/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95.html" aria-label="数据结构和算法"><!--[--><!--[--><!--]--> 数据结构和算法 <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/richard_blog/es6/" aria-label="ES6"><!--[--><!--[--><!--]--> ES6 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/vue2/" aria-label="VUE2"><!--[--><!--[--><!--]--> VUE2 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/vue3/" aria-label="VUE3"><!--[--><!--[--><!--]--> VUE3 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/react/" aria-label="react"><!--[--><!--[--><!--]--> react <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="浏览器"><span class="title">浏览器</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="浏览器"><span class="title">浏览器</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/browser/" aria-label="浏览器基础"><!--[--><!--[--><!--]--> 浏览器基础 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/browser/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%80%A7.html" aria-label="浏览器兼容"><!--[--><!--[--><!--]--> 浏览器兼容 <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/richard_blog/computerNetwork/" aria-label="计算机网络"><!--[--><!--[--><!--]--> 计算机网络 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/performance/" aria-label="性能优化"><!--[--><!--[--><!--]--> 性能优化 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/writeCode/" aria-label="手写代码"><!--[--><!--[--><!--]--> 手写代码 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/wxsp/" aria-label="小程序"><!--[--><!--[--><!--]--> 小程序 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/richard_blog/engineering/" aria-label="是什么"><!--[--><!--[--><!--]--> 是什么 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>代码规范</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/standard/eslint.html" aria-label="eslint"><!--[--><!--[--><!--]--> eslint <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/standard/prettier.html" aria-label="prettier"><!--[--><!--[--><!--]--> prettier <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/standard/%E8%A7%84%E8%8C%83%E6%90%AD%E5%BB%BA.html" aria-label="规范搭建"><!--[--><!--[--><!--]--> 规范搭建 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/standard/%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83.html" aria-label="语法规范"><!--[--><!--[--><!--]--> 语法规范 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>项目构建</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/richard_blog/engineering/webpack.html" aria-label="webpack"><!--[--><!--[--><!--]--> webpack <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/richard_blog/studyRoute/" aria-label="学习路线"><!--[--><!--[--><!--]--> 学习路线 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/projectSolution/" aria-label="项目"><!--[--><!--[--><!--]--> 项目 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/noWrite/" aria-label="待写"><!--[--><!--[--><!--]--> 待写 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/richard_blog/jiankong/" aria-label="前端监控"><!--[--><!--[--><!--]--> 前端监控 <!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#一、git" aria-label="一、Git"><!--[--><!--[--><!--]--> 一、Git <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#_1-git-和-svn-的区别" aria-label="1. git 和 svn 的区别"><!--[--><!--[--><!--]--> 1. git 和 svn 的区别 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_2-经常使用的-git-命令" aria-label="2. 经常使用的 git 命令？"><!--[--><!--[--><!--]--> 2. 经常使用的 git 命令？ <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_3-git-pull-和-git-fetch-的区别" aria-label="3. git pull 和 git fetch 的区别"><!--[--><!--[--><!--]--> 3. git pull 和 git fetch 的区别 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_4-git-rebase-和-git-merge-的区别" aria-label="4. git rebase 和 git merge 的区别"><!--[--><!--[--><!--]--> 4. git rebase 和 git merge 的区别 <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="#二、webpack" aria-label="二、Webpack"><!--[--><!--[--><!--]--> 二、Webpack <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#webpack基本原理" aria-label="webpack基本原理"><!--[--><!--[--><!--]--> webpack基本原理 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#webpack五大核心概念" aria-label="webpack五大核心概念"><!--[--><!--[--><!--]--> webpack五大核心概念 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#loader和plugin的作用" aria-label="loader和plugin的作用"><!--[--><!--[--><!--]--> loader和plugin的作用 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#wepack基础配置" aria-label="wepack基础配置"><!--[--><!--[--><!--]--> wepack基础配置 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#webpack5优化" aria-label="webpack5优化"><!--[--><!--[--><!--]--> webpack5优化 <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="#vite" aria-label="Vite"><!--[--><!--[--><!--]--> Vite <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#vite是什么" aria-label="vite是什么"><!--[--><!--[--><!--]--> vite是什么 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#vite快在哪" aria-label="vite快在哪"><!--[--><!--[--><!--]--> vite快在哪 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#webpack打包和vite的区别" aria-label="webpack打包和vite的区别"><!--[--><!--[--><!--]--> webpack打包和vite的区别 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#vite优化策略" aria-label="vite优化策略"><!--[--><!--[--><!--]--> vite优化策略 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#vite-局限" aria-label="vite 局限"><!--[--><!--[--><!--]--> vite 局限 <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="#npm" aria-label="npm"><!--[--><!--[--><!--]--> npm <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#npm-pnpm-yarn-之间的区别" aria-label="npm pnpm yarn 之间的区别"><!--[--><!--[--><!--]--> npm pnpm yarn 之间的区别 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#pnpm-底层原理" aria-label="pnpm 底层原理"><!--[--><!--[--><!--]--> pnpm 底层原理 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#npx是什么" aria-label="npx是什么"><!--[--><!--[--><!--]--> npx是什么 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#package-json文件的作用" aria-label="package.json文件的作用"><!--[--><!--[--><!--]--> package.json文件的作用 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#package-lock-json文件的作用" aria-label="package-lock.json文件的作用"><!--[--><!--[--><!--]--> package-lock.json文件的作用 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#npm-run-dev原理" aria-label="npm run dev原理"><!--[--><!--[--><!--]--> npm run dev原理 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#monorepo是什么" aria-label="Monorepo是什么"><!--[--><!--[--><!--]--> Monorepo是什么 <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="#其他" aria-label="其他"><!--[--><!--[--><!--]--> 其他 <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#vue-config-js配置" aria-label="vue.config.js配置"><!--[--><!--[--><!--]--> vue.config.js配置 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#自己实现vue-cli步骤" aria-label="自己实现vue-cli步骤"><!--[--><!--[--><!--]--> 自己实现vue-cli步骤 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#babel的原理是什么" aria-label="Babel的原理是什么"><!--[--><!--[--><!--]--> Babel的原理是什么 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#vite-是如何解析用户配置的-env-的" aria-label="vite 是如何解析用户配置的 .env 的"><!--[--><!--[--><!--]--> vite 是如何解析用户配置的 .env 的 <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="一、git" tabindex="-1"><a class="header-anchor" href="#一、git"><span>一、Git</span></a></h2><h3 id="_1-git-和-svn-的区别" tabindex="-1"><a class="header-anchor" href="#_1-git-和-svn-的区别"><span>1. git 和 svn 的区别</span></a></h3><ul><li>git 和 svn 最大的区别在于 git 是分布式的，而 svn 是集中式的。因此我们不能再离线的情况下使用 svn。如果服务器出现问题，就没有办法使用 svn 来提交代码。</li><li>svn 中的分支是整个版本库的复制的一份完整目录，而 git 的分支是指针指向某次提交，因此 git 的分支创建更加开销更小并且分支上的变化不会影响到其他人。svn 的分支变化会影响到所有的人。</li><li>svn 的指令相对于 git 来说要简单一些，比 git 更容易上手。</li><li><strong>GIT把内容按元数据方式存储，而SVN是按文件：</strong> 因为git目录是处于个人机器上的一个克隆版的版本库，它拥有中心版本库上所有的东西，例如标签，分支，版本记录等。</li><li><strong>GIT分支和SVN的分支不同：</strong> svn会发生分支遗漏的情况，而git可以同一个工作目录下快速的在几个分支间切换，很容易发现未被合并的分支，简单而快捷的合并这些文件。</li><li><strong>GIT没有一个全局的版本号，而SVN有</strong></li><li><strong>GIT的内容完整性要优于SVN：</strong> GIT的内容存储使用的是SHA-1哈希算法。这能确保代码内容的完整性，确保在遇到磁盘故障和网络问题时降低对版本库的破坏</li></ul><h3 id="_2-经常使用的-git-命令" tabindex="-1"><a class="header-anchor" href="#_2-经常使用的-git-命令"><span>2. 经常使用的 git 命令？</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>git init                     <span class="token comment">// 新建 git 代码库</span>
git add                      <span class="token comment">// 添加指定文件到暂存区</span>
git rm                       <span class="token comment">// 删除工作区文件，并且将这次删除放入暂存区</span>
git commit <span class="token operator">-</span>m <span class="token punctuation">[</span>message<span class="token punctuation">]</span>      <span class="token comment">// 提交暂存区到仓库区</span>
git branch                   <span class="token comment">// 列出所有分支</span>
git checkout <span class="token operator">-</span>b <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>     <span class="token comment">// 新建一个分支，并切换到该分支</span>
git status                   <span class="token comment">// 显示有变更文件的状态</span>

<span class="token comment">// 配置 Git</span>
git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>name <span class="token string">&quot;Your Name&quot;</span>     <span class="token comment">// 配置用户名</span>
git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>email <span class="token string">&quot;youremail@example.com&quot;</span>      <span class="token comment">// 配置用户邮箱</span>
git config <span class="token operator">--</span>global core<span class="token punctuation">.</span>editor <span class="token string">&quot;vim&quot;</span>     <span class="token comment">// 配置默认文本编辑器</span>
git config <span class="token operator">--</span>list     <span class="token comment">// 查看当前 Git 配置信息</span>

<span class="token comment">// 创建仓库</span>
git init      <span class="token comment">// 创建一个新的本地仓库</span>
git clone <span class="token punctuation">[</span>url<span class="token punctuation">]</span>     <span class="token comment">// 从远程仓库克隆代码到本地</span>

<span class="token comment">// 本地修改</span>
git add <span class="token punctuation">[</span>file<span class="token punctuation">]</span>      <span class="token comment">// 添加文件到暂存区</span>
git add <span class="token punctuation">.</span>     <span class="token comment">// 添加所有修改的文件到暂存区</span>
git reset <span class="token punctuation">[</span>file<span class="token punctuation">]</span>      <span class="token comment">//从暂存区中移除文件，但不删除文件</span>
git checkout <span class="token operator">--</span> <span class="token punctuation">[</span>file<span class="token punctuation">]</span>      <span class="token comment">//撤销对文件的修改（还原到最近一次提交的状态）</span>
git commit <span class="token operator">-</span>m <span class="token string">&quot;Commit message&quot;</span>      <span class="token comment">//提交所有暂存区的修改到本地仓库</span>
git commit <span class="token operator">--</span>amend      <span class="token comment">//修改最近一次提交的信息</span>

<span class="token comment">// 分支管理</span>
git branch      <span class="token comment">// 查看本地分支列表</span>
git branch <span class="token punctuation">[</span>name<span class="token punctuation">]</span>     <span class="token comment">//创建一个新的分支</span>
git checkout <span class="token punctuation">[</span>name<span class="token punctuation">]</span>     <span class="token comment">//切换到指定分支</span>
git merge <span class="token punctuation">[</span>name<span class="token punctuation">]</span>      <span class="token comment">//将指定分支合并到当前分支</span>
git branch <span class="token operator">-</span>d <span class="token punctuation">[</span>name<span class="token punctuation">]</span>      <span class="token comment">//删除指定分支</span>

<span class="token comment">// 远程操作</span>
git remote add <span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span>     <span class="token comment">//添加一个远程仓库</span>
git remote <span class="token operator">-</span>v     <span class="token comment">//查看远程仓库列表</span>
git push <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>      <span class="token comment">//将本地修改推送到远程仓库</span>
git pull <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>      <span class="token comment">//从远程仓库拉取最新代码到本地</span>
git fetch <span class="token punctuation">[</span>remote<span class="token punctuation">]</span>      <span class="token comment">//从远程仓库拉取最新代码到本地，但不进行合并操作</span>

<span class="token comment">// 查看状态</span>
git status      <span class="token comment">//查看当前仓库状态</span>
git log     <span class="token comment">//查看提交历史</span>
git diff      <span class="token comment">//查看当前修改与最新提交之间的差异</span>
git blame <span class="token punctuation">[</span>file<span class="token punctuation">]</span>      <span class="token comment">//查看文件每一行的修改记录</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-git-pull-和-git-fetch-的区别" tabindex="-1"><a class="header-anchor" href="#_3-git-pull-和-git-fetch-的区别"><span>3. git pull 和 git fetch 的区别</span></a></h3><ul><li>git fetch 只是将远程仓库的变化下载下来，并没有和本地分支合并。</li><li>git pull 会将远程仓库的变化下载下来，并和当前分支合并。</li></ul><h3 id="_4-git-rebase-和-git-merge-的区别" tabindex="-1"><a class="header-anchor" href="#_4-git-rebase-和-git-merge-的区别"><span>4. git rebase 和 git merge 的区别</span></a></h3><p>git merge 和 git rebase 都是用于分支合并，关键<strong>在</strong> <strong>commit 记录的处理上不同</strong>：</p><ul><li>git merge 会新建一个新的 commit 对象，然后两个分支以前的 commit 记录都指向这个新 commit 记录。这种方法会保留之前每个分支的 commit 历史。</li><li>git rebase 会先找到两个分支的第一个共同的 commit 祖先记录，然后将提取当前分支这之后的所有 commit 记录，然后将这个 commit 记录添加到目标分支的最新提交后面。经过这个合并后，两个分支合并后的 commit 记录就变为了线性的记录了。</li></ul><h2 id="二、webpack" tabindex="-1"><a class="header-anchor" href="#二、webpack"><span>二、Webpack</span></a></h2><h3 id="webpack基本原理" tabindex="-1"><a class="header-anchor" href="#webpack基本原理"><span>webpack基本原理</span></a></h3><p><code>Webpack</code>是一个静态模块打包工具，它会以一个或多个文件作为打包的入口，将我们整个项目所有文件编译组合成一个或多个文件输出出去。由于 <code>webpack</code>只能处理 JS 与 JSON 文件，所以需要通过一系列的 <code>loader</code> 和 <code>plugin</code> 对其他类型的文件进行处理供浏览器运行。它的原理主要分为以下几个步骤：</p><ul><li><code>初始化参数</code>：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数；</li><li><code>开始编译</code>：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译；</li><li><code>确定入口</code>：根据配置中的 entry 找出所有的入口文件；</li><li><code>编译模块</code>：从入口文件出发，调用所有配置的 <code>Loader</code> 对模块进行编译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；</li><li><code>完成模块编译</code>：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；</li><li><code>输出资源</code>：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；</li><li><code>输出完成</code>：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li></ul><p>在以上过程中，Webpack 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。</p><h3 id="webpack五大核心概念" tabindex="-1"><a class="header-anchor" href="#webpack五大核心概念"><span>webpack五大核心概念</span></a></h3><p>Webpack 是基于 Node.js 运行的，所以采用 Common.js 模块化规范</p><p><strong>entry（入口）</strong></p><p>指示 <code>webpack</code> 应该使用哪个模块来作为构建其内部依赖图的开始，也就是Webpack 从哪个文件开始打包</p><ul><li>string：<code>&quot;./src/index.js&quot;</code> 单入口，打包形成一个chunk，输出一个bundle文件，输出的文件名默认叫main.js。</li><li>array：<code>[&quot;./src/index.js&quot;, &quot;./src/index.html&quot;]</code> 多入口，打包形成一个chunk，输出一个bundle文件，一般用于HTML文件的HMR功能。</li><li>object：<code>{index: &quot;./src/index.js&quot;, add: &quot;./src.add.js&quot;}</code> 多入口，有多少个入口文件就形成几个chunk，输出多少个bundle文件，文件名称是对象中的key</li></ul><p><strong>output（输出）</strong></p><p>指示 Webpack 打包完的文件输出到哪里去，如何命名等</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;js/[name].js&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 输出文件目录（将来所有资源输出的公共目录）</span>
  <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 所有资源引入的公共路径前缀，一般用于生产环境下，所有引入的资源都加入此前缀</span>
  <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">&quot;js/[name]_chunk.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包其他资源时使用此命名，若不配置此项，则使用filename命名</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>loader（加载器）</strong></p><p>webpack 本身只能处理 js、json 等资源，其他资源需要借助 <code>loader</code> 才能解析。它本身是一个函数，接收原文件作为参数，返回转换的结果。loader 一般以 <code>xxx-loader</code> 的方式命名，xxx 代表了这个 loader 要做的转换功能，比如css-loader</p><p><strong>plugins（插件）</strong></p><p>扩展 Webpack 的功能，在 Webpack 构建流程中的特定时机会广播出对应的事件，插件可以监听这些事件的发生，在特定时机做对应的事情。</p><p><strong>mode（模式）</strong></p><p>主要由两种模式：开发模式：<code>development</code> 和生产模式：<code>production</code></p><ul><li>开发依赖：帮助程序员加工代码的库，都是开发依赖</li><li>生产依赖：帮助程序员实现功能效果的库，都是生产依赖</li></ul><h3 id="loader和plugin的作用" tabindex="-1"><a class="header-anchor" href="#loader和plugin的作用"><span>loader和plugin的作用</span></a></h3><p><strong>loader</strong></p><p><code>Loader</code>用于处理<code>Webpack</code>中不同类型的文件，例如JavaScript、CSS、图片等。Webpack默认只能处理JavaScript文件，而对于其他类型的文件，需要使用相应的loader进行处理。Loader是一个函数或者一个模块，它可以将一个文件作为输入，经过处理后返回一个新的文件。</p><p>在Webpack中，loader通过配置文件中的module.rules来定义。一个rule由三个部分组成：</p><ul><li>test：用于匹配需要处理的文件，通常使用正则表达式来定义</li><li>use：定义需要使用的loader，可以是一个或多个loader，按照从后往前的顺序依次执行</li><li>options：loader的配置选项，通常以对象的形式定义</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;css-loader&#39;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>plugin</strong></p><p>主要是扩展 <code>webpack</code> 的功能，例如代码压缩、文件输出等。站在代码逻辑的角度就是：webpack 在编译代码过程中，会触发一系列 Tapable 钩子事件，插件所做的，就是找到相应的钩子，往上面挂上自己的任务，也就是注册事件，这样，当 webpack 构建的时候，插件注册的事件就会随着钩子的触发而执行了</p><p>一个Plugin通常是一个JavaScript对象，它包含一个或多个钩子函数。在Webpack配置文件中，可以通过plugins字段来定义需要使用的Plugin。例如，使用UglifyJsPlugin来压缩代码可以定义如下：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;uglifyjs-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="wepack基础配置" tabindex="-1"><a class="header-anchor" href="#wepack基础配置"><span>wepack基础配置</span></a></h3><p><a href="https://richardhehe.github.io/webpack5_docs/" target="_blank" rel="noopener noreferrer">webpack配置<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://mp.weixin.qq.com/s/vYBuO2lOw0k2dBKx9Uy0yw" target="_blank" rel="noopener noreferrer">webpack基础配置<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://mp.weixin.qq.com/s/COzqLGzEOhMlU9MeYAD_6g" target="_blank" rel="noopener noreferrer">webpack优化<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://mp.weixin.qq.com/s/PJKLUrWegvUwbl5mE4oUeA" target="_blank" rel="noopener noreferrer">webpack规范搭建<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.cn/post/6996816316875161637#heading-49" target="_blank" rel="noopener noreferrer">wepack5<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.cn/post/7023242274876162084#heading-37" target="_blank" rel="noopener noreferrer">webpack5<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>配置entry入口和output输出路径</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&quot;./src/main.js&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;static/js/main.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 将 js 文件输出到 static/js 目录中</span>
    <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 自动将上次打包目录资源清空</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>处理css资源：配置<code>use: [&quot;style-loader&quot;, &quot;css-loader&quot;, &quot;less-loader&quot;]</code></p><ul><li><code>less-loader</code>：负责将 Less 文件编译成 Css 文件</li><li><code>css-loader</code>：负责将 Css 文件编译成 Webpack 能识别的模块</li><li><code>style-loader</code>： 会动态创建一个 Style 标签，里面放置 Webpack 中 Css 模块内容</li><li>sass-loader：负责将 Sass 文件编译成 css 文件</li><li>sass：sass-loader 依赖 sass 进行编译</li><li>stylus-loader：负责将 Styl 文件编译成 Css 文件</li></ul><p><code>提取css文件</code>:Css 文件目前被打包到 js 文件中，当 js 文件加载时，会创建一个 style 标签来生成样式。这样对于网站来说，会出现闪屏现象，用户体验不好。我们应该是单独的 Css 文件，通过 link 标签加载性能才好</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>npm i mini<span class="token operator">-</span>css<span class="token operator">-</span>extract<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token constant">D</span>

<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">]</span>

<span class="token comment">// 提取css成单独文件</span>
<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 定义输出文件名和目录</span>
  <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;static/css/main.css&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>css兼容性处理</code>： <code>npm i postcss-loader postcss postcss-preset-env -D</code></p><p><code>css压缩</code>：<code>npm i css-minimizer-webpack-plugin -D</code></p></li><li><p>处理图片资源： <code>Webpack4</code> 处理图片资源通过 <code>file-loader</code> 和 <code>url-loader</code> 进行处理，<code>Webpack5</code>已经将两个Loader功能内置到Webpack。配置<code>asset</code>即可处理图片资源</p></li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code> <span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|webp)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token comment">// 小于10kb的图片会被base64处理 </span>
        <span class="token comment">// 优点：减少请求数量,以 data URI 形式内置到 js 中  缺点：体积变得更大</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>处理字体图标资源和其他资源(视频音频等)</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(ttf|woff2?|map4|map3|avi)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;static/media/[hash:8][ext][query]&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>处理js资源，Webpack 对 js 处理是有限的，只能编译 js 中 ES 模块化语法，不能编译其他语法</p><ul><li>我们先完成 Eslint，检测代码格式无误后</li><li>在由 Babel 做代码兼容性处理</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>npm i babel<span class="token operator">-</span>loader @babel<span class="token operator">/</span>core @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env <span class="token operator">-</span><span class="token constant">D</span>

<span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 排除node_modules代码不编译</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>处理Html资源，会自动引入js文件</p></li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>npm i html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token constant">D</span>

<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 以 public/index.html 为模板创建文件</span>
  <span class="token comment">// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;public/index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>处理vue文件</p><ul><li>vue：Vue开发所需的依赖</li><li>vue-loader：解析.vue文件的loader</li><li>vue-template-compiler：解析vue中模板的工具</li><li>@vue/babel-preset-jsx：支持解析vue中的jsx语法</li></ul></li><li><p>配置自动化编译，代码都会在内存中自动编译打包</p></li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>npm i webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">-</span><span class="token constant">D</span>

<span class="token comment">// 开发服务器</span>
<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 启动服务器域名</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&quot;3000&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 启动服务器端口号</span>
  <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否自动打开浏览器</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>配置路径别名</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 刚才的代码...</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 路径别名</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;@&#39;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;./src&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">assets</span><span class="token operator">:</span> <span class="token string">&#39;~/assets&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tools</span><span class="token operator">:</span> <span class="token string">&#39;~/tools&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 引入文件时省略后缀</span>
    <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;.js&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.ts&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.less&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.vue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>配置开发环境和生产环境 <ul><li>webpack.base.js：两个环境共用配置 <ul><li>入口，输出配置</li><li>各种文件的处理</li><li>进度条展示</li><li>路径别名</li></ul></li><li>webpack.dev.js：开发环境独有配置 <ul><li>webpack-dev-server</li><li>不同的source-map模式</li><li>不同的环境变量</li></ul></li><li>webpack.prod.js：生产环境独有配置 <ul><li>不同的source-map模式</li><li>不同的环境变量</li></ul></li></ul></li></ul><h3 id="webpack5优化" tabindex="-1"><a class="header-anchor" href="#webpack5优化"><span>webpack5优化</span></a></h3><h4 id="构建速度" tabindex="-1"><a class="header-anchor" href="#构建速度"><span>构建速度</span></a></h4><ul><li><p><strong>HotModuleReplacement（HMR/热模块替换）</strong></p><p>开发时我们修改了其中一个模块代码，<code>Webpack</code> 默认会将所有模块全部重新打包编译，速度很慢。使用<code>HotModuleReplacement</code>让开发时只重新编译打包更新变化了的代码，不变的代码使用缓存，从而使更新速度更快。</p></li><li><p><strong>OneOf</strong></p><p>打包时每个文件都会经过所有 loader 处理，虽然因为 <code>test</code> 正则原因实际没有处理上，但是都要过一遍。比较慢。使用 <code>OneOf</code> 让资源文件一旦被某个 loader 处理了，就不会继续遍历了，打包速度更快。</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code> <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">oneOf</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>配置Include/Exclude缩减范围</strong></p><p>配置include/exclude缩小Loader对文件的搜索范围，好处是避免不必要的转译。node_modules目录的体积这么大，那得增加多少时间成本去检索所有文件啊？include/exclude通常在各大Loader里配置</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">src</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>cache缓存副本</strong></p><p>有了<code>cache</code>后，<code>dll</code>和<code>cache-loader</code>都不需要了</p><p>第一种：每次打包时 js 文件都要经过 Eslint 检查 和 Babel 编译，速度比较慢。使用 <code>Cache</code> 对 eslint 和 babel 处理的结果进行缓存，再次编译时只编译修改过的文件</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">EslintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第二种：配置 webpack 持久化缓存<code>type: &#39;filesystem&#39;</code>, 可以设置为memory或filesystem，来缓存构建过程中的中间结果，大幅提升二次构建速度、打包速度，当构建突然中断，二次进行构建时，可以直接从缓存中拉取，可提速 90% 左右。</p></li><li><p><strong>Thread-loader多进程打包</strong></p><p><code>happypack</code>webpack5已经弃用</p><p>我们想要继续提升打包速度，其实就是要提升 js 的打包速度，因为其他文件都比较少。而对 js 文件处理主要就是 <code>eslint</code> 、<code>babel</code>、<code>Terser</code>(webpack默认压缩js的) 三个工具，所以我们要提升它们的运行速度</p><p>Thread-loader是Webpack中一个用于多进程打包的Loader，它可以将某个Loader的执行过程放到一个单独的worker池中运行，从而加速打包过程。使用 <code>Thread</code> 多进程获取cpu多个核心处理 eslint 和 babel 任务，速度更快。使用方法是将<code>thread-loader</code>放在比较费时间的loader。</p><p><code>注意</code>: 每个进程启动都有开销的(大约600ms)，所以我们只有在后期项目比较大的情况下才会使用多进程</p></li><li><p><strong>区分source-map类型</strong></p><p><code>source-map</code>的作用是：source-map 是一种映射关系，可以将编译后的代码映射回原始代码，以方便在开发和调试过程中定位问题。在开发环境和生产环境中都可以使用 source-map。它的体积不容小觑，所以对于不同环境设置不同的类型是很有必要的</p><ul><li><p>开发模式：devtool: eval-cheap-module-source-map</p><ul><li>本地开发首次打包慢点没关系，因为 <code>eval</code> 缓存的原因，rebuild 会很快</li><li>开发中，我们每行代码不会写的太长，只需要定位到行就行，所以加上 <code>cheap</code></li><li>我们希望能够找到源代码的错误，而不是打包后的，所以需要加上 <code>module</code></li></ul></li><li><p>生产模式：不要sourcemap或者<code>devtool: source-map</code></p><ul><li>优点：包含行/列映射</li><li>缺点：打包编译速度更慢</li></ul></li></ul></li><li><p><strong>优化resolve配置</strong></p><p><code>resolve</code>用来配置 webpack 如何解析模块，可通过优化 resolve 配置来覆盖默认配置项，减少解析范围。 alias 可以创建别名、extensions 表示需要解析的文件类型列表、modules 表示 webpack 解析模块时需要解析的目录等</p></li><li><p><strong>区分环境</strong></p><p>在开发过程中，切忌在开发环境使用生产环境才会用到的工具，如在开发环境下，应该排除 <code>[fullhash]</code>/<code>[chunkhash]</code>/<code>[contenthash]</code> 等工具。</p><p>同样，在生产环境，也应该避免使用开发环境才会用到的工具，如 webpack-dev-server 等插件。</p></li></ul><h4 id="优化打包体积" tabindex="-1"><a class="header-anchor" href="#优化打包体积"><span>优化打包体积</span></a></h4><ul><li><p><strong>打包体积分析</strong></p><p>借助插件webpack-bundle-analyzer分析文件的体积大小、各模块依赖关系，找出无用的依赖并卸载</p></li><li><p><strong>代码压缩</strong></p><ul><li>js代码压缩：webpack5 自带最新的 terser-webpack-plugin， 并默认就开启了多进程和缓存，无需手动安装</li><li>css代码压缩： CSS代码压缩使用css-minimizer-webpack-plugin，会清除无用的 CSS 代码，压缩和优化 CSS</li></ul></li><li><p><strong>图片压缩</strong></p><p>使用 <code>image-minimizer-webpack-plugin</code>插件对项目中图片进行压缩，体积更小，请求速度更快。（如果项目中图片都是在线链接，那么就不需要了。本地项目静态图片才需要进行压缩。）小于10kb的图片 转base64 这样体积不会大很多，但是可以减少请求次数</p></li><li><p><strong>开启Gzip压缩</strong></p><p>开启 gzip 压缩都可以大大减小资源传输的大小，提高应用性能。使用webpack插件compression-webpack-plugin，当 Webpack 打包完成后，会生成对应的 gzip 压缩文件，浏览器在请求资源时，如果支持 gzip 压缩，会自动请求对应的 gzip 压缩文件。（需要nginx开启 gzip_static on）。只要看响应头部（Response headers）中 有没有Content-Encoding: gzip这个属性即可，有代表有开启gzip压缩。</p></li><li><p><strong>按需引入组件库</strong></p><p>像 element-ui 这种组件库可以按需引入。使用babel-plugin-import插件。这个插件可以自动将组件库中的组件按需导入，可以大大减小打包后的文件大小（修改.babelrc）</p><ol><li>安装 babel-plugin-component：</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> babel-plugin-component <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>在 babel.config.js（或者 .babelrc 文件）中配置 babel-plugin-component：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// babel.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;@vue/cli-plugin-babel/preset&#39;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&#39;component&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">libraryName</span><span class="token operator">:</span> <span class="token string">&#39;element-ui&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">styleLibraryName</span><span class="token operator">:</span> <span class="token string">&#39;theme-chalk&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里的 libraryName 是指定 Element UI 的库名，styleLibraryName 是指定样式库名。</p><ol start="3"><li>Vue 组件中按需引入 Element UI 组件</li></ol><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 在需要使用的组件中按需引入 Element UI 组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;element-ui&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    Button<span class="token punctuation">,</span>
    Input
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>使用CDN服务</strong></p><p>我们公司使用的腾讯CDN，第三方依赖使用CDN引入，externals 是用来告诉打包工具哪些模块是外部依赖，应该在运行时从外部获取而不是打包进 bundle 中</p></li><li><p><strong>开启Tree Shaking</strong></p><p>移除 JavaScript 中的没有使用上的代码，当打包的<code>mode</code>为<code>production</code>时，<code>webpack5</code>自动开启<code>tree-shaking</code>进行优化</p><p>开发时我们定义了一些工具函数库，或者引用第三方工具函数库或组件库。如果没有特殊处理的话我们打包时会引入整个库，但是实际上可能我们可能只用上极小部分的功能。这样将整个库都打包进来，体积就太大了。使用 <code>Tree Shaking</code> 剔除了没有使用的多余代码，让代码体积更小。</p></li><li><p><strong>Scope Hoisting</strong></p><p>在 JavaScript 中，还有“变量提升”和“函数提升”，JavaScript 会将变量和函数的声明提升到当前作用域顶部，而“作用域提升”也类似，webpack 将引入到 JS 文件“提升到”它的引入者的顶部</p><p>Scope Hoisting的主要目的是减少由于模块化导致的JavaScript文件数量，减少代码中的重复引用，从而减少打包后文件的体积，提高应用程序的加载速度。当打包的<code>mode</code>为<code>production</code>时，<code>webpack5</code>自动开启<code>Scope Hoisting</code>进行优化。由于 Scope Hoisting 需要分析出模块之间的依赖关系，因此源码必须采用 ES6 模块化语句，不然它将无法生效</p><p>在没有Scope Hoisting的情况下，Webpack会将每个模块的代码都封装在一个函数中，并通过require来调用这个函数。这种方式会导致打包后的代码体积变得非常庞大，因为每个模块的代码都需要包装在一个函数内部，这样就会导致大量的重复代码。</p><p>Scope Hoisting通过将模块的代码合并到一个函数内部，消除重复代码，从而减少了打包后的代码体积，提高了应用程序的加载速度。这个技术可以在Webpack中通过设置optimization.scopeHoisting来开启，从而实现对应用程序的性能优化。</p></li><li><p><strong>去除babel生成的辅助代码</strong></p><p>Babel 编译时为的每个文件都插入了辅助代码，使代码体积过大！Babel 对一些公共方法使用了非常小的辅助代码，比如 _extend。默认情况下会被添加到每一个需要它的文件中。你可以将这些辅助代码作为一个独立模块，来避免重复引入。</p><p>引入<code>@babel/plugin-transform-runtime</code>插件: 禁用了 Babel 自动对每个文件的 runtime 注入，使所有辅助代码从插件这里引用，从而体积更小</p></li><li><p><strong>IgnorePlugin</strong></p><p>IgnorePlugin 是用来忽略特定的模块，不被打包进最终的 bundle 中。</p><p>在某些情况下，某些模块虽然被引用了，但实际上并不需要被打包，例如一些 polyfill 库、一些大型的依赖库等等。这时可以使用 IgnorePlugin 将这些模块忽略掉，从而减小 bundle 的体积，提高加载速度。比如monet的语言文件</p></li><li><p><strong>source-map</strong></p><p>生产环境可以选择不打包source-map或者选择一些轻量的source-map</p></li></ul><h4 id="优化代码运行性能" tabindex="-1"><a class="header-anchor" href="#优化代码运行性能"><span>优化代码运行性能</span></a></h4><ul><li><p><strong>代码分割 Code Split</strong></p><p>打包代码时会将所有 js 文件打包到一个文件中，体积太大了。我们如果只要渲染首页，就应该只加载首页的 js 文件，其他文件不应该加载。</p><p>使用 <code>splitChunks</code>配置对代码进行分割成多个 js 文件，从而使单个文件体积更小，并行加载 js 速度更快。并通过 import 动态导入语法进行按需加载，达到需要使用时才加载该资源，不用时不加载资源。这也是路由懒加载的实现方式</p></li><li><p><strong>Preload / Prefetch</strong></p><p>使用<code>import</code> 动态导入来进行按需加载，加载速度有限制，比如：是用户点击按钮时才加载这个资源的，如果资源体积很大，那么用户会感觉到明显卡顿效果。使用 <code>Preload / Prefetch</code> 对代码进行提前加载，等未来需要使用时就能直接使用，从而用户体验更好。</p><p><code>Preload</code>只能加载当前页面需要使用的资源，<code>Prefetch</code>可以加载当前页面资源，也可以加载下一个页面需要使用的资源。它们的问题：兼容性较差</p></li><li><p><strong>合理使用hash值应对缓存</strong></p><p>使用 <code>contenthash</code> 能对输出资源文件进行命名，这样才能保证在上线后，改过的文件需要更新hash值，而没改过的文件依然保持原本的hash值，浏览器访问时没有改变的文件会命中缓存，从而达到性能优化的目</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.base.js</span>

<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// 给js文件加上 contenthash</span>
  <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;js/chunk-[contenthash].js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Core-js</strong></p><p>我们使用 <code>babel</code> 对 js 代码进行了兼容性处理，其中使用@babel/preset-env 智能预设来处理兼容性问题。它能将 ES6 的一些语法进行编译转换，比如箭头函数、扩展运算符等。但是如果是 async 函数、promise 对象、数组的一些方法（includes）等，它没办法处理。所以此时我们 js 代码仍然存在兼容性问题，一旦遇到低版本浏览器会直接报错。所以我们想要将 js 兼容性问题彻底解决</p><p><code>core-js</code> 是专门用来做 ES6 以及以上 API 的 <code>polyfill</code>。使用 <code>Core-js</code> 对 js 进行兼容性处理，让我们代码能运行在低版本浏览器。</p></li><li><p><strong>PWA离线处理</strong></p><p>开发 Web App 项目，项目一旦处于网络离线情况，就没法访问了。我们希望给项目提供离线体验。使用 <code>PWA</code> 能让代码离线也能访问，从而提升用户体验。内部通过 Service Workers 技术实现的</p></li><li><p><strong>小图转base64</strong></p><p>样可以减少用户的http网络请求次数，提高用户的体验。webpack5中url-loader已被废弃，改用asset-module</p></li></ul><h2 id="vite" tabindex="-1"><a class="header-anchor" href="#vite"><span>Vite</span></a></h2><h3 id="vite是什么" tabindex="-1"><a class="header-anchor" href="#vite是什么"><span>vite是什么</span></a></h3><p><a href="https://juejin.cn/post/7064853960636989454" target="_blank" rel="noopener noreferrer">文章<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><code>定义</code>: <code>Vite</code>是面向现代浏览器的前端构建工具，在尤雨溪开发<code>Vue3.0</code>的时候诞生。类似于<code>Webpack</code>+ <code>Webpack-dev-server</code>。其主要利用浏览器<code>ESM</code>特性导入组织代码，在服务器端按需编译返回，完全跳过了打包这个概念，服务器随起随用。生产中利用<code>Rollup</code>作为打包工具，号称下一代的前端构建工具。</p><p><code>Vite</code>有如下特点：</p><ul><li>快速的冷启动: <code>No Bundle</code> + <code>esbuild</code> 预构建</li><li>即时的模块热更新: 基于<code>ESM</code>的<code>HMR</code>，同时利用浏览器缓存策略提升速度</li><li>真正的按需加载: 利用浏览器<code>ESM</code>支持，实现真正的按需加载</li></ul><p><code>Vite</code>其核心原理是利用浏览器现在已经支持<code>ES6</code>的<code>import</code>,碰见<code>import</code>就会发送一个<code>HTTP</code>请求去加载文件，<code>Vite</code>启动一个 <code>koa</code> 服务器拦截这些请求，并在后端进行相应的处理将项目中使用的文件通过简单的分解与整合，然后再以<code>ESM</code>格式返回返回给浏览器。<code>Vite</code>整个过程中没有对文件进行打包编译，做到了真正的按需加载，所以其运行速度比原始的<code>webpack</code>开发编译速度快出许多！</p><h3 id="vite快在哪" tabindex="-1"><a class="header-anchor" href="#vite快在哪"><span>vite快在哪</span></a></h3><p><strong>问题现状</strong></p><p><strong>1.ES模块化支持的问题</strong></p><p>咱们都知道，以前的浏览器是不支持ES module的，比如：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// index.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./add.js&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sub <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./sub.js&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sub</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// add.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b

<span class="token comment">// sub.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">sub</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你觉得这样的一段代码，放到浏览器能直接运行吗？答案是不行的哦。那怎么解决呢？这时候打包工具出场了，他将index.js、add.js、sub.js这三个文件打包在一个bundle.js文件里，然后在项目index.html中直接引入bundle.js，从而达到代码效果。一些打包工具，都是这么做的，例如webpack、Rollup、Parcel</p><p><strong>2.项目启动与代码更新的问题</strong></p><ul><li>项目启动：随着项目越来越大，启动个项目可能要几分钟</li><li>代码更新：随着项目越来越大，修改一小段代码，保存后都要等几秒才更新</li></ul><p><strong>解决问题</strong></p><p><strong>1.解决启动项目缓慢</strong></p><p>Vite在打包的时候，将模块分成两个区域<code>依赖</code>和<code>源码</code>：</p><ul><li><code>依赖</code>：一般是那种在开发中不会改变的JavaScript，比如组件库，或者一些较大的依赖（可能有上百个模块的库），这一部分使用esbuild来进行预构建依赖,esbuild使用的是 Go 进行编写，比 JavaScript 编写的打包器预构建依赖快 10-100倍</li><li><code>源码</code>：一般是哪种好修改几率比较大的文件，例如JSX、CSS、vue这些需要转换且时常会被修改编辑的文件。同时，这些文件并不是一股脑全部加载，而是可以按需加载（例如路由懒加载）。Vite会将文件转换后，以es module的方式直接交给浏览器，因为现在的浏览器大多数都直接支持es module，这使性能提高了很多，为什么呢？咱们看下面两张图：</li></ul><p>第一张图，是以前的打包模式，就像之前举的index.js、add.js、sub.js的例子，项目启动时，需要先将所有文件打包成一个文件bundle.js，然后在html引入，这个多文件 -&gt; bundle.js的过程是非常耗时间的。</p><p><img src="/richard_blog/assets/vite111111-kgz4zFAH.png" alt="alt"></p><p>第二张图，是Vite的打包方式，刚刚说了，Vite是直接把转换后的es module的JavaScript代码，扔给支持es module的浏览器，让浏览器自己去加载依赖，也就是把压力丢给了浏览器，从而达到了项目启动速度快的效果。</p><p><img src="/richard_blog/assets/vite22222-U0QMnSVI.png" alt="alt"></p><p><strong>2.解决更新缓慢</strong></p><p>刚刚说了，项目启动时，将模块分成依赖和源码，当你更新代码时，依赖就不需要重新加载，只需要精准地找到是哪个源码的文件更新了，更新相对应的文件就行了。这样做使得更新速度非常快。</p><p>Vite 同时利用 HTTP 头来加速整个页面的重新加载（再次让浏览器为我们做更多事情）：源码模块的请求会根据 304 Not Modified 进行协商缓存，而依赖模块请求则会通过 Cache-Control: max-age=31536000,immutable 进行强缓存，因此一旦被缓存它们将不需要再次请求。</p><p><strong>生产环境</strong></p><p>刚刚咱们说的都是开发环境，也说了，Vite在是直接把转化后的es module的JavaScript，扔给浏览器，让浏览器根据依赖关系，自己去加载依赖。</p><p>那有人就会说了，那放到生产环境时，是不是可以不打包，直接在开个Vite服务就行，反正浏览器会自己去根据依赖关系去自己加载依赖。答案是不行的，为啥呢：</p><ol><li>你代码是放在服务器的，过多的浏览器加载依赖肯定会引起更多的网络请求</li><li>为了在生产环境中获得最佳的加载性能，最好还是将代码进行tree-shaking、懒加载和 chunk 分割、CSS处理，这些优化操作，目前esbuild还不怎么完善 所以Vite最后的打包是使用了Rollup</li></ol><h3 id="webpack打包和vite的区别" tabindex="-1"><a class="header-anchor" href="#webpack打包和vite的区别"><span>webpack打包和vite的区别</span></a></h3><p><strong>webpack</strong></p><ul><li><code>webpack启动</code>：传统的打包工具如<code>Webpack</code>是先解析依赖、打包构建再启动开发服务器，<code>Dev Server</code> 必须等待所有模块构建完成，当我们修改了 <code>bundle</code>模块中的一个子模块， 整个 <code>bundle</code> 文件都会重新打包然后输出。项目应用越大，启动时间越长。</li><li><code>Webpack HMR 热更新</code>的反应速度比较慢。Webpack 的热更新会以当前修改的文件为入口重新 build 打包，所有涉及到的依赖也都会被重新加载一次。虽然webpack 也采用的是局部热更新并且是有缓存机制的，但是还是需要重新打包所以很大的代码项目是真的有卡顿的现象</li><li>webpack使用的是 <code>node.js</code> 去实现的，而 vite 使用的是 <code>esbuild</code> 预构建依赖。而 <code>esbuild</code> 使用 <code>Go</code> 编写的，比 node.js 编写的打包器预构建依赖快 <code>10-100</code> 倍。</li></ul><p><strong>vite</strong></p><ul><li><p><code>快速冷启动</code>：vite主要遵循的是使用ESM(Es modules模块)的规范来执行代码，由于现代浏览器基本上都支持了ESM规范，所以在开发阶段并不需要将代码打包编译成es5模块即可在浏览器上运行。我们只需要从入口文件出发， 在遇到对应的 <code>import</code> 语句时，将对应的模块加载到浏览器中就可以了。因此，这种不需要打包的特性，也是vite的速度能够如此快速的原因。</p></li><li><p><code>按需打包</code>：当浏览器请求某个模块时，再根据需要对模块内容进行编译。这种按需动态编译的方式，极大的缩减了编译时间，项目越复杂，模块越多vite的优势越明显。</p></li><li><p><code>在HMR（模块热替换）</code>: 当改动一个模块后，仅需让浏览器重新请求该模块即可，不像webpack那样需要把该模块的相关依赖模块全部编译一次，效率更高</p></li><li><p>webpack 在全过程依赖 <code>babel-loader</code> 处理代码, vite 在开发过程中使用 <code>esbuild 构建</code>。esbuild 是一个新的代码构建工具，其构建依赖于 go，并且利用了 <code>paralleljs</code> 高并行的优势，构建速度非常疯狂。</p></li><li><p><code>打包到生产环境</code>，vite使用传统的<code>rollup</code>进行打包，因此，vite的主要优势在开发阶段。另外，由于vite利用的时ES Module，因此在代码中不可以使用CommonJS</p></li><li><p><code>对现代的浏览器支持性比较好</code>，传统的浏览器可以通过官方提供的 @vite/plugin-legacy 插件支持。</p></li><li><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fvitejs.dev%2Fplugins%2F%23official-plugins" title="https://vitejs.dev/plugins/#official-plugins" target="_blank" rel="noopener noreferrer">官方插件<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 共有四个，</p><ul><li><code>@vitejs/plugin-vue</code> 用以处理 vue 文件，将文件中的 template、style 和 script 分析成三个部分</li><li><code>@vitejs/plugin-vue-jsx</code> 用以处理 vue 中的 jsx，与 react 不同的是，vue 中的 jsx 插件，具有 v-modal、v-slots 等 vue 特有的属性</li><li><code>@vitejs/plugin-react-refresh</code>通过比对更改，为 react 提供更快的局部更新</li><li><code>@vitejs/plugin-legacy</code> 在 esbuild 构建之后再经过一层 @babel/preset-env，用来兼容不支持 ESM 或 ie11 的旧版浏览器</li></ul></li></ul><h3 id="vite优化策略" tabindex="-1"><a class="header-anchor" href="#vite优化策略"><span>vite优化策略</span></a></h3><p>由于vite打包是让浏览器一个个模块去加载的，因此，就很容易存在http请求的瀑布流问题（浏览器并发一次最多6个请求）。此次，vite内部为了解决这个问题，主要采取了3个方案。</p><ol><li>预打包，确保每个依赖只对应一个请求/文件。比如lodash。此处可以参考 <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Fblob%2Fmain%2Fpackages%2Fvite%2Fsrc%2Fnode%2Foptimizer%2FesbuildDepPlugin.ts%23L73" title="https://github.com/vitejs/vite/blob/main/packages/vite/src/node/optimizer/esbuildDepPlugin.ts#L73" target="_blank" rel="noopener noreferrer">github.com/vitejs/vite…<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>代码分割code split。可以借助rollup内置的 <code>manualChunks</code> 来实现。</li><li>Etag 304状态码，让浏览器在重复加载的时候直接使用浏览器缓存。</li></ol><h3 id="vite-局限" tabindex="-1"><a class="header-anchor" href="#vite-局限"><span>vite 局限</span></a></h3><ul><li>vite 与webpack 相比，毕竟出道时间有点短，它的生态还不是不完善。webpack最牛之处就在于 loader 和 plugin 非常丰富。</li><li>vite 打包项目时，目前使用的是 Rollup，对 CSS和代码分割不是很友好。</li><li>vite 刚兴起不久，生态系统还不够完善，建议大家在创建工作项目的时候还是使用 webpack 。自己的项目可以使用 vite</li></ul><h2 id="npm" tabindex="-1"><a class="header-anchor" href="#npm"><span>npm</span></a></h2><h3 id="npm-pnpm-yarn-之间的区别" tabindex="-1"><a class="header-anchor" href="#npm-pnpm-yarn-之间的区别"><span>npm pnpm yarn 之间的区别</span></a></h3><p>npm、pnpm 和 yarn 都是用于管理 JavaScript 项目依赖的工具，它们之间有一些区别和特点：</p><p><strong>1. npm (Node Package Manager):</strong></p><ul><li>npm 是 Node.js 官方的包管理工具，是 Node.js 的默认包管理器。</li><li>npm 有着庞大的生态系统，并且被广泛使用。大多数 JavaScript 项目都使用 npm 来管理依赖。</li><li>npm 会将项目的依赖安装到 node_modules 目录下，并在项目的 package.json 文件中记录依赖信息。</li></ul><p><strong>2. yarn:</strong></p><ul><li>yarn 是 Facebook 开发的一个替代 npm 的包管理工具，旨在解决 npm 安装依赖的速度和可靠性问题。</li><li>yarn 的命令行界面与 npm 类似，可以使用大部分 npm 命令。</li><li>yarn 通过并行安装依赖、缓存机制等优化，可以显著提高依赖安装的速度。</li></ul><p><strong>3. pnpm:</strong></p><ul><li>pnpm 是另一个替代 npm 的包管理工具，与 npm 和 yarn 不同的是，pnpm 采用了符号链接的方式来共享依赖，而不是像 npm 和 yarn 那样将依赖复制到每个项目中。</li><li>pnpm 使用硬链接和符号链接，使得每个依赖包只存储一次，可以节省磁盘空间，并且可以加快依赖安装的速度。</li><li>pnpm 支持 npm 和 yarn 的大多数命令和配置，可以无缝切换使用。</li></ul><p>总的来说，npm 是 Node.js 的默认包管理工具，yarn 和 pnpm 是对 npm 的替代方案，它们在依赖管理、安装速度、磁盘空间利用等方面有一些不同的优势。选择使用哪个工具取决于个人偏好和项目需求。</p><p><strong>4. cnpm</strong>：淘宝 NPM，使用 cnpm 可以通过淘宝的镜像加速包的下载速度</p><h3 id="pnpm-底层原理" tabindex="-1"><a class="header-anchor" href="#pnpm-底层原理"><span>pnpm 底层原理</span></a></h3><p>硬链接（Hard Link）和软链接（Symbolic Link，也称为软连接或符号链接）都是用于在文件系统中创建指向文件或目录的链接的概念，但它们之间有一些重要的区别：</p><ul><li>硬链接：硬链接关联的文件共享相同的数据内容，一个文件数据更改了，另外一个也会更改。</li><li>软链接：软链接实际上是一个指向目标文件的快捷方式，指向另一个文件或目录的路径。删除原始文件可能会导致软链接失效，因为它们指向的目标文件不存在了。</li></ul><p><img src="/richard_blog/assets/Xnip2024-04-08_15-13-58-C5poY-SC.jpg" alt="alt"></p><p>如上图所示 pnpm 安装了 <code>bar@1.0.0</code>这个依赖，它软链接方式指向了 <code>.pnpm</code> 中的 <code>bar@1.0.0</code>，这个又硬链接指向了 <code>.pnpm store</code> 这个仓库，可以通过 <code>pnpm store path</code> 这个命令查看电脑中这个仓库的位置，这个仓库存储了所有 <code>pnpm</code> 安装的依赖</p><h3 id="npx是什么" tabindex="-1"><a class="header-anchor" href="#npx是什么"><span>npx是什么</span></a></h3><p>npx是一个工具，npm v5.2.0引入的一条命令（npx），它的作用是临时安装并执行一个 Node.js 模块。npx 会自动查找当前依赖包中的可执行文件，如果找不到，就会去 PATH 里找。如果依然找不到，就会帮你安装</p><p>例如： 使用create-react-app创建一个react项目</p><p>老方法：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> create-react-app
create-react-app my-app
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>npx方式：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx create-react-app my-app
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这条命令会临时安装 create-react-app 包，命令完成后create-react-app 会删掉，不会出现在 global 中。下次再执行，还是会重新临时安装。</p><h3 id="package-json文件的作用" tabindex="-1"><a class="header-anchor" href="#package-json文件的作用"><span>package.json文件的作用</span></a></h3><p>package.json 文件是一个重要的配置文件，它定义了项目的依赖关系、脚本命令和元数据信息，对于项目的开发、构建和部署等方面起到关键的作用。开发者需要维护和更新 package.json 文件，以保证项目的正常运行和开发流程的顺利进行。</p><p><strong>版本号</strong></p><p>版本号由三部分组成:major.minor.patch，主版本号.次版本号.修补版本号。</p><p>我们安装一些依赖包的时候，版本号前面都会带^或者~的符号</p><ul><li><code>~</code>会四配最新的小版本依赖包，出如<code>~1.2.3</code>会品所有<code>1.2.x</code>版本，但是不包括<code>1.3.0</code></li><li><code>^</code>会匹配最新的大版本依赖包，比如<code>^1.2.3</code>会匹配所有<code>1.x.x</code>的包，包括<code>1.3.0</code>，但是不包括<code>2.0.0</code></li><li><code>*</code>安装最新版本的依赖包，比如<code>*1.2.3</code>会匹配<code>x.x.x</code>;</li></ul><h3 id="package-lock-json文件的作用" tabindex="-1"><a class="header-anchor" href="#package-lock-json文件的作用"><span>package-lock.json文件的作用</span></a></h3><p><code>package-lock.json</code> 文件是 <code>npm 5+</code> 版本引入的一种锁定依赖版本的机制。当我们在一个项目中<code>npm install</code>时候，会自动生成一个<code>package-lock.json</code>文件。记录了项目的一些信息和所依赖的模块。这样在每次安装都会出现相同的结果，不管你在什么机器上面或什么时候安装。当我们下次再<code>npm install</code>时候，npm发现如果项目中有<code>package-lock.ison</code>文件，会根据<code>package-lock.ison</code>里的内容来处理和安装依赖而不再根据<code>package.json</code></p><p><strong>作用:</strong></p><p>锁定依赖版本：package-lock.json 文件记录了项目中所有直接和间接依赖的精确版本号。当运行 npm install 安装依赖时，npm 会根据该文件确保安装的依赖版本与之前一致，从而保证在不同环境中得到相同的依赖树。这样可以提高构建的可重复性和稳定性，避免意外的依赖更新引发的问题。</p><p>提高安装速度：package-lock.json 文件中包含了每个依赖的下载地址和哈希值，npm 在安装依赖时可以直接使用这些信息从缓存中获取已下载的包，而无需重新下载。这样可以减少网络请求和下载时间，提高安装速度。</p><p>确保安全性：package-lock.json 文件还记录了每个依赖包的完整性校验信息，包括其下载源、哈希值等。这样可以确保依赖包的完整性，避免被恶意篡改或注入恶意代码</p><h3 id="npm-run-dev原理" tabindex="-1"><a class="header-anchor" href="#npm-run-dev原理"><span>npm run dev原理</span></a></h3><p>在npm run dev的时候，首先会去项目的package.json文件里找scripts 里找对应的 dev，然后执行 dev 的命令。例如启动vue项目 npm run serve的时候，实际上就是执行了vue-cli-service serve 这条命令。</p><p>为什么不直接执行<code>vue-cli-service serve</code>命令呢？</p><ul><li>因为直接执行<code>vue-cli-service serve</code>，会报错，因为操作系统中没有存在<code>vue-cli-service</code>这一条指令</li></ul><p>为什么执行<code>npm run dev</code>的时候，也就是相当于执行了<code>vue-cli-service serve</code> ，为什么这样它就能成功？</p><ul><li><p>我们在npm install 安装依赖是，会在<code>node_modules/.bin/</code> 目录中创建好<code>vue-cli-service</code> 为名的几个可执行文件。</p></li><li><p><code>.bin</code> 目录不是任何一个 npm 包。目录下的文件，表示一个个软链接，打开文件可以看到文件顶部写着 <code>#!/bin/sh</code> ，表示这是一个脚本。</p></li><li><p>所以当使用 <code>npm run dev</code> 执行 <code>vue-cli-service serve</code> 时，虽然没有安装 <code>vue-cli-service</code>的全局命令，但是 npm 会到 <code>./node_modules/.bin</code> 中找到 <code>vue-cli-service</code> 文件作为脚本来执行，则相当于执行了 <code>./node_modules/.bin/vue-cli-service serve</code>。</p></li></ul><p>既然<code>.bin</code> 目录下的文件表示软连接，那这个bin目录下的那些软连接文件是哪里来的呢？它又是怎么知道这条软连接是执行哪里的呢？</p><ul><li><p>bin目录下的那些软连接存在于项目最外层的<strong>package-lock.json</strong>文件中。</p></li><li><p>从 package-lock.json 中可知，当我们<code>npm install</code> 整个新建的vue项目的时候，npm 将 bin/vue-cli-service.js 作为 bin 声明了。</p></li><li><p>所以在 <code>npm install</code> 时，npm 读到该配置后，就将该文件软链接到 ./node_modules/.bin 目录下，而 npm 还会自动把node_modules/.bin加入$PATH，这样就可以直接作为命令运行依赖程序和开发依赖程序，不用全局安装了。</p></li><li><p>也就是说，npm install 的时候，npm 就帮我们把这种软连接配置好了，其实这种软连接相当于一种映射，执行npm run dev 的时候，就会到 node_modules/bin中找对应的映射文件，然后再找到相应的js文件来执行。</p></li></ul><p>可以 node node_modules/.bin/xx 来跑，可以 npx xx 来跑，最常用的还是 npm scripts，通过 npm run xx 来跑</p><h3 id="monorepo是什么" tabindex="-1"><a class="header-anchor" href="#monorepo是什么"><span>Monorepo是什么</span></a></h3><p><img src="/richard_blog/assets/WX20240408-210858@2x-B8wVIjQf.png" alt="alt"></p><p>如图所示结构</p><ul><li>最外层的 <code>node_modules</code> 会放所有项目公共(main, web)的依赖，只有自己使用到的依赖，存放在自己的 <code>node_modules</code> 中</li><li>子模块复用可以新建文件夹<code>common</code>，可以存放公用的功能，比如 <code>axios</code>, 在main中和web中直接引入就能使用</li></ul><p><code>Monorepo</code>（单一代码库）是一种软件开发的组织结构模式，它将多个相关的项目或模块放置在同一个版本控制库（例如Git仓库）中。这与传统的多个独立仓库相对应。</p><p>Monorepo 的主要特点包括：</p><ul><li>统一的依赖管理</li></ul><p>所有相关的模块和库都位于同一个代码库中，可以统一管理它们的依赖关系。可以借助工具很方便的进行统一的依赖升级，在前端开发中也不用安装多次 node_modules，大大减少了磁盘占用空间和安装时间</p><ul><li>更方便共享和复用代码</li></ul><p>在 monorepo 模式下，如果在开发过程中想抽取可复用的代码，只需要抽离公共代码到shared-utils模块中。而对于 multirepo 来说，跨项目的公共代码实现是比较麻烦的，虽然可以通过发布包安装依赖的方式解决这个问题，但是始终没有 monorepo 来的方便</p><ul><li>可以统一构建和发布</li></ul><p>相比于单独维护多个独立的仓库，Monorepo可以提供一个统一的构建系统，使得构建、测试和部署变得更加一致。并且模块之间是独立的，用户如果只想使用 Vue3.x 的响应式能力，可单独依赖reactivity这个响应式库而不用去依赖整个 Vue，减小了引用包的体积大小。</p><ul><li>跨项目协作和重构：Monorepo 使得不同项目之间的协作更加紧密，开发者可以更容易地修改和重构跨项目的共享代码。这样可以加快开发速度，提高团队的协同工作效率。</li></ul><p>需要注意的是，Monorepo 并不适用于所有项目，它更适合于大型或复杂的项目，以及具有强关联性的项目集合。在选择是否使用 Monorepo 时，需要综合考虑团队规模、项目复杂度等情况</p><h2 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h2><h3 id="vue-config-js配置" tabindex="-1"><a class="header-anchor" href="#vue-config-js配置"><span>vue.config.js配置</span></a></h3><p><code>configureWebpack</code>原生配置方式，配置的结果将会被 webpack-merge 合并入最终的 webpack 配置。</p><p><code>chainWebpack</code>链式配置方式，vue-cli内部是使用webpack-chain这个插件来维护webpack配置的，因为能更细粒度的控制其内部配置，因此也是官方比较推荐的一个方式。</p><p><strong>去除国际化语言文件</strong></p><p>有的插件存在较多的 locale file (国际化语言文件)，在实际使用时，只引入项目中需要的语言文件即可，比如moment: 用webpack自带的IgnorePlugin插件</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token string">&#39;moment/locale/zh-cn&#39;</span>

<span class="token comment">//webpack</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.\/locale</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">moment</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>前端开启gzip</strong></p><p>服务器开启nginx后,代码经过压缩就会小很多,但是如果我们打包后的代码没有压缩过,那就是服务端来负责压缩,自然会拖慢服务端加载速度,我们应该在webpack中开启压缩</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>npm install compression<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token constant">D</span>

<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span> 
<span class="token comment">// 压缩代码 </span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$|\.html$|.\css</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 匹配文件名 </span>
    <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span> <span class="token comment">// 对超过10k的数据压缩 </span>
    <span class="token literal-property property">deleteOriginalAssets</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// true 不删除源文件 false 删除源文件 </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>去除console.log</strong></p><p>去除警告现在为webpack默认插件 <code>TerserWebpackPlugin</code></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
    <span class="token literal-property property">terserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
        <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
        <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
        <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
        <span class="token literal-property property">drop_debugger</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
        <span class="token literal-property property">pure_funcs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;console.log&#39;</span><span class="token punctuation">]</span> 
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第三方UI库改为按需加载</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>npm install babel<span class="token operator">-</span>plugin<span class="token operator">-</span>component <span class="token operator">-</span><span class="token constant">D</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@vue/app&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&#39;component&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">libraryName</span><span class="token operator">:</span> <span class="token string">&#39;element-ui&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">styleLibraryName</span><span class="token operator">:</span> <span class="token string">&#39;theme-chalk&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>增加编译进度条</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">//webpack.common.js</span>
<span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;chalk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ProgressBarPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;progress-bar-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 进度条</span>
    <span class="token keyword">new</span> <span class="token class-name">ProgressBarPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">  :msg [:bar] </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span>green<span class="token punctuation">.</span><span class="token function">bold</span><span class="token punctuation">(</span><span class="token string">&quot;:percent&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> (:elapsed s)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>打包分析文件</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">//webpack.prod.js</span>
<span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-bundle-analyzer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span> 

<span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>svg-sprite-loader</strong></p><p>将svg图片以雪碧图的方式在项目中加载</p><h3 id="自己实现vue-cli步骤" tabindex="-1"><a class="header-anchor" href="#自己实现vue-cli步骤"><span>自己实现vue-cli步骤</span></a></h3><p><strong>基本搭建</strong></p><ul><li>出入口文件配置</li><li>通过loader和plugin处理js、css、html、图片、字体图标等资源</li><li>babel和eslint的配置</li><li>vue文件的打包</li><li>路径别名的配置</li><li>webpack-dev-server的配置</li><li>环境区分</li><li>环境变量的设置</li><li>source-map的配置</li><li>构建进度条的显示</li></ul><p><strong>基本优化</strong></p><ul><li>构建速度的优化</li><li>体积的优化</li><li>运行性能优化</li></ul><p><strong>基本规范</strong></p><ul><li>eslint</li><li>prettier</li><li>husky</li><li>stylelint</li></ul><h3 id="babel的原理是什么" tabindex="-1"><a class="header-anchor" href="#babel的原理是什么"><span>Babel的原理是什么</span></a></h3><p>babel 的转译过程也分为三个阶段，这三步具体是：</p><ul><li><strong>解析 Parse</strong>: 将代码解析⽣成抽象语法树（AST），即词法分析与语法分析的过程；</li><li><strong>转换 Transform</strong>: 对于 AST 进⾏变换⼀系列的操作，babel 接受得到 AST 并通过 babel-traverse 对其进⾏遍历，在此过程中进⾏添加、更新及移除等操作；</li><li><strong>⽣成 Generate</strong>: 将变换后的 AST 再转换为 JS 代码, 使⽤到的模块是 babel-generator。</li></ul><h3 id="vite-是如何解析用户配置的-env-的" tabindex="-1"><a class="header-anchor" href="#vite-是如何解析用户配置的-env-的"><span>vite 是如何解析用户配置的 .env 的</span></a></h3><p>我们在项目开发过程中，会使用一些 环境变量， webpack 通过 全局注册到 process.env 上， vite 通过读取env配置文件， 挂载到 import.meta.xxx上， 我们现在调试 vite 源码，学习整个过程</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1324980809@qq.com">zqy</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/richard_blog/assets/app-e94K_zRz.js" defer></script>
  </body>
</html>
